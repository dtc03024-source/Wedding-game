<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Wedding Run</title>
  <style>
    :root{
      --pink:#ff6fae;
      --pink2:#ff97c6;
      --ivory:#fff7f1;
      --mint:#7fe1d3;
      --ink:#3b2b35;
      --card:#ffffff;
      --line:rgba(0,0,0,.08);
      --shadow:0 18px 50px rgba(0,0,0,.12);
      --radius:22px;
      --btnRadius:18px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, "Noto Sans KR", Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(255,111,174,.18), transparent 60%),
        radial-gradient(900px 600px at 90% 15%, rgba(127,225,211,.16), transparent 55%),
        linear-gradient(180deg, #fff, var(--ivory));
      color:var(--ink);
      overflow:hidden;
      -webkit-tap-highlight-color: transparent;
    }
    #wrap{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:16px;}
    #stage{
      position:relative;
      width:min(520px, 100%);
      height:min(920px, 100%);
      aspect-ratio: 9 / 16;
      border-radius: 28px;
      background: linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.25));
      box-shadow: var(--shadow);
      overflow:hidden;
      border:1px solid rgba(255,111,174,.15);
    }
    canvas#game{
      width:100%;
      height:100%;
      display:block;
      background:
        radial-gradient(900px 420px at 20% 10%, rgba(255,151,198,.16), transparent 60%),
        radial-gradient(800px 420px at 80% 12%, rgba(127,225,211,.12), transparent 60%),
        linear-gradient(180deg, #fff, var(--ivory));
    }

    #hud{
      position:absolute;
      top:12px; left:12px; right:12px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      z-index:20;
      pointer-events:none;
    }
    .pill{
      pointer-events:auto;
      user-select:none;
      display:flex;align-items:center;gap:8px;
      padding:10px 14px;border-radius:999px;
      background:rgba(255,255,255,.82);
      border:1px solid var(--line);
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      font-weight:700;
      letter-spacing:-.2px;
      white-space:nowrap;
    }
    .pill .dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(180deg,var(--pink),var(--pink2));box-shadow:0 6px 12px rgba(255,111,174,.28);}
    #score{font-variant-numeric: tabular-nums}
    .btn{
      border:0;
      background:rgba(255,255,255,.9);
      border:1px solid var(--line);
      border-radius: var(--btnRadius);
      padding:14px 16px;
      font-weight:800;font-size:16px;
      cursor:pointer;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
      color:var(--ink);
      white-space:nowrap;
    }
    .btn.primary{
      background: linear-gradient(180deg, var(--pink2), var(--pink));
      color:#fff;border:0;
      box-shadow: 0 16px 30px rgba(255,111,174,.30);
    }
    .btn.mint{
      background: linear-gradient(180deg, rgba(127,225,211,.95), rgba(127,225,211,.75));
      color:#0c3a33;border:0;
      box-shadow: 0 16px 30px rgba(127,225,211,.28);
    }
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap}
    .btnRow .btn{flex:1}

    .overlay{
      position:absolute;inset:0;
      display:none;align-items:center;justify-content:center;
      padding:18px;z-index:30;
      background: rgba(255,255,255,.40);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .overlay.show{display:flex}
    .card{
      width: min(460px, 100%);
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(255,111,174,.18);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px 18px 16px;
    }
    .title{display:flex;align-items:center;gap:10px;font-size:24px;font-weight:900;margin:4px 0 8px;letter-spacing:-.5px;}
    .sub{margin:0 0 14px;line-height:1.5;font-weight:700;opacity:.9;}
    .noWrap{white-space:nowrap}
    .sep{height:1px;background:rgba(0,0,0,.08);margin:14px 0}
    #guideMap{width:100%;border-radius:16px;border:1px solid rgba(0,0,0,.08);background:#fff;display:block;}
    #deathPhoto{width:100%;height:260px;object-fit:cover;border-radius:16px;border:1px solid rgba(0,0,0,.08);background:#fff;display:block;}
    .field{width:100%;padding:14px 14px;border-radius:16px;border:1px solid rgba(0,0,0,.10);font-size:16px;outline:none;background:rgba(255,255,255,.95);}
    .hint{margin-top:10px;font-size:13px;opacity:.75;font-weight:700;line-height:1.4;}
    #giftStatus{margin-top:10px;font-weight:900;letter-spacing:-.2px;}
    #hud[data-hidden="1"]{opacity:0;pointer-events:none}
  </style>
</head>
<body>
  <div id="wrap">
    <div id="stage">
      <canvas id="game"></canvas>

      <div id="hud" data-hidden="1">
        <div class="pill"><span class="dot"></span> ì ìˆ˜ <span id="score">0</span></div>
        <button id="btnPause" type="button" class="btn">ì¼ì‹œì •ì§€</button>
      </div>

      <div id="startOverlay" class="overlay show">
        <div class="card">
          <div class="title">ğŸ’— ì›¨ë”© ëŸ°</div>
          <p class="sub">
            í™”ë©´ì„ íƒ­í•´ì„œ ì í”„! ì¥ì• ë¬¼ì„ ë„˜ì–´ì„œ ì˜ˆì‹ì¥ê¹Œì§€ ë„ì°©í•´ìš”.<br/>
            <span class="noWrap"><b>ì¡°ì‘:</b>&nbsp;í™”ë©´&nbsp;í„°ì¹˜&nbsp;=&nbsp;ì í”„&nbsp;/&nbsp;<b>ë¹ ë¥´ê²Œ&nbsp;2ë²ˆ&nbsp;í„°ì¹˜&nbsp;=&nbsp;2ë‹¨ì í”„</b></span><br/>
            ëª©í‘œ ì ìˆ˜ <b>120ì </b> (ì¥ì• ë¬¼ 1ê°œ = 10ì )
          </p>
          <div class="btnRow">
            <button id="btnStart" type="button" class="btn primary">ì‹œì‘í•˜ê¸°</button>
            <button id="btnGuide" type="button" class="btn">ê¸¸ì•ˆë‚´ ë³´ê¸°</button>
          </div>
        </div>
      </div>

      <div id="guideOverlay" class="overlay">
        <div class="card">
          <div class="title">ğŸ§­ ê¸¸ì•ˆë‚´</div>
          <p class="sub">ì•„ë˜ ì§€ë„ë¥¼ ì°¸ê³ í•´ì„œ ì˜¤ì„¸ìš” :)</p>
          <img id="guideMap" alt="ê¸¸ì•ˆë‚´ ì§€ë„" src="assets/map.png" />
          <div class="sep"></div>
          <div class="btnRow">
            <button id="btnGuideCloseGuide" type="button" class="btn primary">ë‹«ê¸°</button>
          </div>
        </div>
      </div>

      <div id="pauseOverlay" class="overlay">
        <div class="card">
          <div class="title">â¸ï¸ ì¼ì‹œì •ì§€</div>
          <p class="sub">ì ê¹ ì‰¬ì—ˆë‹¤ê°€ ë‹¤ì‹œ ë‹¬ë ¤ìš”!</p>
          <div class="btnRow">
            <button id="btnResume" type="button" class="btn primary">ê³„ì†í•˜ê¸°</button>
          </div>
        </div>
      </div>

      <div id="gameOverOverlay" class="overlay">
        <div class="card">
          <div class="title">ì•—! ì¥ì• ë¬¼ì— ê±¸ë ¸ì–´ìš” ğŸ˜µ</div>
          <p class="sub">ëŒ€ì‹ â€¦ ì ê¹ ìš°ë¦¬ ì‚¬ì§„ ë³´ê³  ë‹¤ì‹œ ì¶œë°œ! ğŸ“¸</p>
          <img id="deathPhoto" alt="ì›¨ë”© ì‚¬ì§„" src="" />
          <div class="sep"></div>
          <div class="btnRow">
            <button id="btnRetry" type="button" class="btn primary">ë‹¤ì‹œ ë„ì „</button>
            <button id="btnOpenGuide2" type="button" class="btn">ê¸¸ì•ˆë‚´ ë³´ê¸°</button>
          </div>
          <div class="hint">íŒ: ë¯¼íŠ¸ í‘œì§€íŒì€ â€œì•ˆë‚´â€, í•‘í¬ëŠ” â€œì¥ì• ë¬¼â€!</div>
        </div>
      </div>

      <div id="finalOverlay" class="overlay">
        <div class="card">
          <div class="title">ğŸ‰ ë„ì°©! ìš°ë¦¬ ì´ì œ ê²°í˜¼í•´ìš”</div>
          <p class="sub">ëª¨ë°”ì¼ ì²­ì²©ì¥ì„ ë°”ë¡œ ì—´ì–´ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
          <div class="btnRow">
            <button id="btnInviteLink" type="button" class="btn mint">ëª¨ë°”ì¼ ì²­ì²©ì¥ ë°”ë¡œ ì—´ê¸°</button>
            <button id="btnFinalRestart" type="button" class="btn">ë‹¤ì‹œ í”Œë ˆì´</button>
          </div>

          <div class="sep"></div>

          <div style="font-weight:900; margin-bottom:10px;">ğŸ ì¶”ì²¨ ì´ë²¤íŠ¸ ì°¸ì—¬</div>
          <input id="giftName" class="field" placeholder="ì´ë¦„" autocomplete="name" />
          <div style="height:10px"></div>
          <input id="giftPhone" class="field" placeholder="íœ´ëŒ€í°ë²ˆí˜¸" inputmode="tel" autocomplete="tel" />
          <div style="height:12px"></div>
          <div class="btnRow">
            <button id="btnGiftSubmit" type="button" class="btn primary">ì‘ëª¨í•˜ê¸°</button>
          </div>
          <div id="giftStatus"></div>

          <div class="hint">â€» ì…ë ¥í•˜ì‹  ì •ë³´ëŠ” ì¶”ì²¨ ë° ì•ˆë‚´ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</div>

          <div class="sep"></div>
          <div class="btnRow">
            <button id="btnFinalClose" type="button" class="btn">ì¢…ë£Œ</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script src="game.js" defer></script>
</body>
</html>
